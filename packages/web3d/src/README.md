# 点云标注工具

一个开源的面向自动驾驶的3D点云标注工具。

## 架构设计

### 数据流

遵循单向数据流原则，数据在应用程序中以一种严格的单向流动方式传递。
数据从源头（例如用户输入、API响应等）流向应用程序的状态层，然后再通过状态层流向用户界面层，确保了数据的一致性和可追溯性。

数据源分三层，分别是：
- 核心数据源，用于维护题目数据与当前答案数据，这部分数据保存在Page与Answer的store中
- 工具数据源，用于维护当前工具状态，这部分数据保存在Drama中
- 插件数据源，用于维护各个插件自身的状态，这部分数据由各个插件自己的维护，插件之间无法直接访问

## 核心模块

### Drama

Drama是整个工具的核心，它负责维护工具数据源，并把数据源与各个插件进行交互。
Drama在使用前，需要提供初始化信息，包含Page数据结构及页面上画布Dom

Drama设置完毕后，插件测通过useDrama这个hook，可以访问并使用如下能力：
- 访问当前工具各块区域的Dom节点
- 访问page与answer，与对应修改answer操作的入口
- 访问主画布的render、scene、camera、controler等对象
- 对于多帧数据，通过frames数组，访问不同帧的点云及对应标注数据
- 操作三视图视图，并获取三视图中用户修改其内容的事件
- 统一的输入事件响应，包括鼠标画框画线、快捷键等

### Page && Answer

Page与Answer为工具整体核心状态数据源，其中Page为输入，Answer为答案

Page包含当前题目数据、题型配置、前置环节答案。
Answer当前答案，使用不可变数据结构

### Scene

## 关键插件

### 

## 业务功能插件

### Box

Box插件用于在点云数据上创建和标注3D边界框。该插件为用户提供了一种所见即所得的方式，以便在点云场景中高效且准确地绘制和定义物体的边界。

#### 主要功能：

- 创建边界框：用户可以使用该插件在点云数据中创建3D边界框。插件支持直接绘制矩形、立方体或自定义形状的边界框。用户可以通过拖动鼠标来绘制框的位置和尺寸，从而准确地定义物体的边界。

- 自动对齐：插件具有智能的自动对齐功能，可以根据点云数据的几何特征自动调整边界框的位置和朝向。这样可以大大提高标注的速度和准确性，减少用户的操作步骤。

- 标注属性：除了绘制边界框外，该插件还允许用户为每个框添加自定义的标注属性。用户可以为物体分配不同的类别标签、ID号码、置信度等信息，以便进一步分析和处理点云数据。

- 编辑和调整：一旦绘制完成，用户可以对已创建的边界框进行编辑和调整。插件支持移动、旋转和调整大小等操作，以便更好地适应物体的形状和位置。

#### 具体实现

### Parsing

Parsing插件用于对点云数据进行语义分割和分类。该插件为用户提供了一种所见即所得的方式，以便在点云场景中高效且准确地进行语义分割操作。

主要功能：

- 类别设置：用户可以通过不同的颜色或标签来区分不同的语义类别，以便更好地理解和分析点云数据
  
- 语义分割能力：插件支持直接绘制矩形、多边形等方式，选择点云中的一部分点，并对它们进行语义分割。用户可以通过拖动鼠标来绘制框的位置和尺寸，从而准确地选择需要分割的点。
  
- 算法预识别：采用先进的深度学习算法和模型，可以预先识别出部分如地面、树木、建筑物等物体，以便用户更方便地选择需要分割的点。
  
#### 具体实现

### Line

Line插件用于在点云数据上创建和标注线条。该插件为用户提供了一种所见即所得的方式，以便在点云场景中高效切准确的方式绘制线条。


